{"ast":null,"code":"import _objectSpread from \"/Users/ibandasca/Documents/Ironhack/DEV/Mod03/Mod03-Final-Project/frontend/epi-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/ibandasca/Documents/Ironhack/DEV/Mod03/Mod03-Final-Project/frontend/epi-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ibandasca/Documents/Ironhack/DEV/Mod03/Mod03-Final-Project/frontend/epi-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ibandasca/Documents/Ironhack/DEV/Mod03/Mod03-Final-Project/frontend/epi-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ibandasca/Documents/Ironhack/DEV/Mod03/Mod03-Final-Project/frontend/epi-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ibandasca/Documents/Ironhack/DEV/Mod03/Mod03-Final-Project/frontend/epi-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ibandasca/Documents/Ironhack/DEV/Mod03/Mod03-Final-Project/frontend/epi-frontend/src/components/Container.js\";\nimport React, { Component } from 'react';\nimport vote from '../lib/votes-service';\nimport { Link } from 'react-router-dom';\nimport '../stylesheets/container-component.css';\nimport moment from 'moment';\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Container)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: _this.props.data,\n      viewSteps: false //INCREASE THE POSITIVE VOTES\n\n    };\n\n    _this.handleIncreaseVote = function (index) {\n      return function () {\n        var data = _objectSpread({}, _this.state.data);\n\n        data.steps[index].positiveVotes++; // console.log(data)\n\n        _this.setState({\n          data: data\n        }); //CALLING POSITIVE VOTES SERVICE\n\n\n        vote.createPositiveVote(data._id, data.steps[index]._id).then(function () {// console.log(data)\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n    };\n\n    _this.handleDecreaseVote = function (index) {\n      return function () {\n        // Esto crea una shalow copy\n        var data = _objectSpread({}, _this.state.data);\n\n        data.steps[index].negativeVotes++; // console.log(data)\n\n        _this.setState({\n          data: data\n        }); //CALLING NEGATIVE VOTES SERVICE\n\n\n        vote.createNegativeVote(data._id, data.steps[index]._id).then(function () {// console.log(data)\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n    };\n\n    _this.toggleStep = function () {\n      var viewSteps = _this.state.viewSteps;\n\n      _this.setState({\n        viewSteps: !viewSteps\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          data = _this$state.data,\n          viewSteps = _this$state.viewSteps; //number of positive votes\n\n      var positive = data.steps.reduce(function (acum, item) {\n        return acum + item.positiveVotes;\n      }, 0); //number of negative votes\n\n      var negative = data.steps.reduce(function (acum, item) {\n        return acum + item.negativeVotes;\n      }, 0); //get total of votes\n\n      var total = positive + negative; //get positive ratio\n\n      var rate = (positive / total * 100).toFixed(0);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-post-post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, data.title), React.createElement(\"div\", {\n        className: \"container-post-author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/profile/\".concat(data.author._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, data.author.username)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, moment(data.date).fromNow())), React.createElement(\"p\", {\n        className: \"container-post-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, data.text), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Positive votes: \", rate == NaN ? 0 : rate, \" %\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, data.steps.length > 1 ? React.createElement(\"button\", {\n        onClick: this.toggleStep,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, viewSteps ? 'Close steps' : 'View steps') : null)), React.createElement(\"ol\", {\n        className: \"container-post-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, viewSteps ? data.steps.map(function (step, key) {\n        return React.createElement(\"li\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"container-post-votes\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, step.positiveVotes), React.createElement(\"img\", {\n          src: \"\".concat(process.env.PUBLIC_URL, \"/img/arrow_up.png\"),\n          alt: \"arrow-img\",\n          width: \"40px\",\n          onClick: _this2.handleIncreaseVote(key),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, step.negativeVotes), React.createElement(\"img\", {\n          src: \"\".concat(process.env.PUBLIC_URL, \"/img/arrow_down.png\"),\n          alt: \"arrow-img\",\n          width: \"40px\",\n          onClick: _this2.handleDecreaseVote(key),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"container-post-step\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, step.step));\n      }) : null)));\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default Container;","map":{"version":3,"sources":["/Users/ibandasca/Documents/Ironhack/DEV/Mod03/Mod03-Final-Project/frontend/epi-frontend/src/components/Container.js"],"names":["React","Component","vote","Link","moment","Container","state","data","props","viewSteps","handleIncreaseVote","index","steps","positiveVotes","setState","createPositiveVote","_id","then","catch","error","console","log","handleDecreaseVote","negativeVotes","createNegativeVote","toggleStep","positive","reduce","acum","item","negative","total","rate","toFixed","title","author","username","date","fromNow","text","NaN","length","map","step","key","process","env","PUBLIC_URL"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport vote from '../lib/votes-service';\nimport { Link } from 'react-router-dom'\nimport '../stylesheets/container-component.css'\nimport moment from 'moment'\n\nclass Container extends Component {\n\n  state = {\n    data: this.props.data,\n    viewSteps: false,\n  }\n  \n  //INCREASE THE POSITIVE VOTES\n  handleIncreaseVote = (index) => () => {\n    const data = {...this.state.data}\n    data.steps[index].positiveVotes++;\n    // console.log(data)\n    \n    this.setState({\n      data: data\n    })\n    \n    //CALLING POSITIVE VOTES SERVICE\n    vote.createPositiveVote( data._id, data.steps[index]._id )\n    .then(() => {\n      // console.log(data)\n    })\n    .catch( error => {console.log(error) })\n  }\n\n  //INCREASE THE NEGATIVE VOTES\n  handleDecreaseVote = (index) => () => {\n    // Esto crea una shalow copy\n    const data = {...this.state.data}\n    data.steps[index].negativeVotes++;\n    // console.log(data)\n    \n    this.setState({\n      data: data\n    })\n    \n    //CALLING NEGATIVE VOTES SERVICE\n    vote.createNegativeVote( data._id, data.steps[index]._id )\n    .then(() => {\n      // console.log(data)\n    })\n    .catch( error => {console.log(error) })\n  }\n\n  toggleStep = () => {\n    const { viewSteps } = this.state\n    this.setState({\n      viewSteps: !viewSteps\n    })\n  }\n\n  render() {\n    const { data, viewSteps } = this.state;\n    //number of positive votes\n    const positive = data.steps.reduce((acum, item) => {\n      return acum + item.positiveVotes\n    }, 0)\n    //number of negative votes\n    const negative = data.steps.reduce((acum, item) => {\n      return acum + item.negativeVotes\n    }, 0)\n    //get total of votes\n    const total = positive + negative;\n    //get positive ratio\n    const rate = ((positive/total)*100).toFixed(0);\n\n    return (\n      <div>\n        <div className=\"container-post-post\">\n          <h1>{data.title}</h1>\n          <div className=\"container-post-author\">\n          <p><Link to={`/profile/${data.author._id}`}>{data.author.username}</Link></p>\n          <p>{moment(data.date).fromNow()}</p>\n          </div>\n          <p className=\"container-post-description\">{data.text}</p>\n          <div>\n            <div>\n              <p>Positive votes: { (rate == NaN) ? 0: rate } %</p> \n            </div>\n            <div>\n              {data.steps.length > 1 ? \n              <button onClick={this.toggleStep}>{viewSteps ? 'Close steps' : 'View steps'}</button> : null}\n            </div>\n          </div>\n          <ol className=\"container-post-list\">\n          {viewSteps ? data.steps.map((step, key) => {\n            return <li key={key}>\n              <div className=\"container-post-votes\">\n                <p>{step.positiveVotes}</p>\n                <img src={`${process.env.PUBLIC_URL}/img/arrow_up.png`} alt=\"arrow-img\" width=\"40px\" onClick={this.handleIncreaseVote(key)}></img>\n                <p>{step.negativeVotes}</p>\n                <img src={`${process.env.PUBLIC_URL}/img/arrow_down.png`} alt=\"arrow-img\" width=\"40px\" onClick={this.handleDecreaseVote(key)}></img>\n              </div>\n              <div className=\"container-post-step\">{step.step}</div>         \n            </li>\n          }) : null}\n          </ol>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Container"]},"metadata":{},"sourceType":"module"}