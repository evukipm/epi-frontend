{"ast":null,"code":"import _objectSpread from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/oem/ironhack/final-project/epi-frontend/src/components/Container.js\";\nimport React, { Component } from 'react';\nimport vote from '../lib/votes-service';\nimport { Link } from 'react-router-dom';\nimport '../stylesheets/container-component.css';\nimport moment from 'moment';\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Container)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: _this.props.data,\n      viewSteps: false //INCREASE THE POSITIVE VOTES\n\n    };\n\n    _this.handleIncreaseVote = function (index) {\n      return function () {\n        var data = _objectSpread({}, _this.state.data);\n\n        data.steps[index].positiveVotes++;\n        console.log(data);\n\n        _this.setState({\n          data: data\n        }); //CALLING POSITIVE VOTES SERVICE\n\n\n        vote.createPositiveVote(data._id, data.steps[index]._id).then(function () {\n          console.log(data);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n    };\n\n    _this.handleDecreaseVote = function (index) {\n      return function () {\n        // Esto crea una shalow copy\n        var data = _objectSpread({}, _this.state.data);\n\n        data.steps[index].negativeVotes++;\n        console.log(data);\n\n        _this.setState({\n          data: data\n        }); //CALLING NEGATIVE VOTES SERVICE\n\n\n        vote.createNegativeVote(data._id, data.steps[index]._id).then(function () {\n          console.log(data);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n    };\n\n    _this.toggleStep = function () {\n      var viewSteps = _this.state.viewSteps;\n\n      _this.setState({\n        viewSteps: !viewSteps\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          data = _this$state.data,\n          viewSteps = _this$state.viewSteps;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-post-post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, data.title), React.createElement(\"div\", {\n        className: \"container-post-author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/profile/\".concat(data.author._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, data.author.username)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, moment(data.date).toNow())), React.createElement(\"p\", {\n        className: \"container-post-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, data.text), data.steps.length > 1 ? React.createElement(\"button\", {\n        onClick: this.toggleStep,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, viewSteps ? 'Close steps' : 'View steps') : null, React.createElement(\"ol\", {\n        className: \"container-post-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, viewSteps ? data.steps.map(function (step, key) {\n        return React.createElement(\"li\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"container-post-votes\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, step.positiveVotes), React.createElement(\"img\", {\n          src: \"\".concat(process.env.PUBLIC_URL, \"/img/arrow_up.png\"),\n          alt: \"arrow-img\",\n          width: \"40px\",\n          onClick: _this2.handleIncreaseVote(key),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, step.negativeVotes), React.createElement(\"img\", {\n          src: \"\".concat(process.env.PUBLIC_URL, \"/img/arrow_down.png\"),\n          alt: \"arrow-img\",\n          width: \"40px\",\n          onClick: _this2.handleDecreaseVote(key),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"container-post-step\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, step.step));\n      }) : null)));\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default Container;","map":{"version":3,"sources":["/home/oem/ironhack/final-project/epi-frontend/src/components/Container.js"],"names":["React","Component","vote","Link","moment","Container","state","data","props","viewSteps","handleIncreaseVote","index","steps","positiveVotes","console","log","setState","createPositiveVote","_id","then","catch","error","handleDecreaseVote","negativeVotes","createNegativeVote","toggleStep","title","author","username","date","toNow","text","length","map","step","key","process","env","PUBLIC_URL"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport vote from '../lib/votes-service';\nimport { Link } from 'react-router-dom'\nimport '../stylesheets/container-component.css'\nimport moment from 'moment'\n\nclass Container extends Component {\n\n  state = {\n    data: this.props.data,\n    viewSteps: false,\n  }\n  \n  //INCREASE THE POSITIVE VOTES\n  handleIncreaseVote = (index) => () => {\n    const data = {...this.state.data}\n    data.steps[index].positiveVotes++;\n    console.log(data)\n    \n    this.setState({\n      data: data\n    })\n    \n    //CALLING POSITIVE VOTES SERVICE\n    vote.createPositiveVote( data._id, data.steps[index]._id )\n    .then(() => {\n      console.log(data)\n    })\n    .catch( error => {console.log(error) })\n  }\n\n  //INCREASE THE NEGATIVE VOTES\n  handleDecreaseVote = (index) => () => {\n    // Esto crea una shalow copy\n    const data = {...this.state.data}\n    data.steps[index].negativeVotes++;\n    console.log(data)\n    \n    this.setState({\n      data: data\n    })\n    \n    //CALLING NEGATIVE VOTES SERVICE\n    vote.createNegativeVote( data._id, data.steps[index]._id )\n    .then(() => {\n      console.log(data)\n    })\n    .catch( error => {console.log(error) })\n  }\n\n  toggleStep = () => {\n    const { viewSteps } = this.state\n    this.setState({\n      viewSteps: !viewSteps\n    })\n  }\n\n  render() {\n    const { data, viewSteps } = this.state\n\n    return (\n      <div>\n        <div className=\"container-post-post\">\n          <h1>{data.title}</h1>\n          <div className=\"container-post-author\">\n          <p><Link to={`/profile/${data.author._id}`}>{data.author.username}</Link></p>\n          <p>{moment(data.date).toNow()}</p>\n          </div>\n          <p className=\"container-post-description\">{data.text}</p>\n          {data.steps.length > 1 ? <button onClick={this.toggleStep}>{viewSteps ? 'Close steps' : 'View steps'}</button> : null}\n          <ol className=\"container-post-list\">\n          {viewSteps ? data.steps.map((step, key) => {\n            return <li key={key}>\n              <div className=\"container-post-votes\">\n                <p>{step.positiveVotes}</p>\n                <img src={`${process.env.PUBLIC_URL}/img/arrow_up.png`} alt=\"arrow-img\" width=\"40px\" onClick={this.handleIncreaseVote(key)}></img>\n                <p>{step.negativeVotes}</p>\n                <img src={`${process.env.PUBLIC_URL}/img/arrow_down.png`} alt=\"arrow-img\" width=\"40px\" onClick={this.handleDecreaseVote(key)}></img>\n              </div>\n              <div className=\"container-post-step\">{step.step}</div>            \n            </li>\n          }) : null}\n          </ol>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Container"]},"metadata":{},"sourceType":"module"}