{"ast":null,"code":"import _objectSpread from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/oem/ironhack/final-project/epi-frontend/src/components/Container.js\";\nimport React, { Component } from 'react';\nimport vote from '../lib/votes-service';\nimport { Link } from 'react-router-dom';\nimport '../stylesheets/container-component.css';\nimport moment from 'moment';\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Container)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: _this.props.data,\n      viewSteps: false,\n      postives: [] //INCREASE THE POSITIVE VOTES\n\n    };\n\n    _this.handleIncreaseVote = function (index) {\n      return function () {\n        var data = _objectSpread({}, _this.state.data);\n\n        data.steps[index].positiveVotes++; // console.log(data)\n\n        _this.setState({\n          data: data\n        }); //CALLING POSITIVE VOTES SERVICE\n\n\n        vote.createPositiveVote(data._id, data.steps[index]._id).then(function () {// console.log(data)\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n    };\n\n    _this.handleDecreaseVote = function (index) {\n      return function () {\n        // Esto crea una shalow copy\n        var data = _objectSpread({}, _this.state.data);\n\n        data.steps[index].negativeVotes++; // console.log(data)\n\n        _this.setState({\n          data: data\n        }); //CALLING NEGATIVE VOTES SERVICE\n\n\n        vote.createNegativeVote(data._id, data.steps[index]._id).then(function () {// console.log(data)\n        }).catch(function (error) {\n          console.log(error);\n        });\n      };\n    };\n\n    _this.toggleStep = function () {\n      var viewSteps = _this.state.viewSteps;\n\n      _this.setState({\n        viewSteps: !viewSteps\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"handleRatioOfPositiveVotes\",\n    value: function handleRatioOfPositiveVotes(key) {\n      var _this$state = this.state,\n          data = _this$state.data,\n          postives = _this$state.postives;\n      return data.steps[key].positiveVotes;\n    }\n  }, {\n    key: \"sumAllNumbers\",\n    value: function sumAllNumbers(arrayOfNums) {\n      arrayOfNums.reduce(function (previusValue, curentVlue) {\n        // console.log(previusValue, curentVlue)\n        return previusValue + curentVlue;\n      }, 0);\n    } //\n\n    /*{data.steps.map( (step, key) =>{\n      numberOfVotes.push(this.handleRatioOfPositiveVotes(key))\n      return numberOfVotes.reduce(function(previusValue, curentVlue){\n        console.log(previusValue, curentVlue)\n        return previusValue + curentVlue;\n      }, 0);\n    })}\n    */\n\n    /*\n    (numerosPositivos / (numerosPositivos + numerosNegativos) * 100\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          data = _this$state2.data,\n          viewSteps = _this$state2.viewSteps;\n      var numberOfVotes = [];\n      var positive = data.steps.reduce(function (acum, item) {\n        console.log('E', item.positiveVotes);\n        return acum + item.positiveVotes;\n      }, 0);\n      var negative = data.steps.reduce(function (acum, item) {\n        return acum + item.negativeVotes;\n      }, 0); // console.log((positive / (positive + negative)) * 100);\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container-post-post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, data.title), React.createElement(\"div\", {\n        className: \"container-post-author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/profile/\".concat(data.author._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, data.author.username)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, moment(data.date).fromNow())), React.createElement(\"p\", {\n        className: \"container-post-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, data.text), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Positive votes:\", data.steps.map(function (step, key) {\n        numberOfVotes.push(_this2.handleRatioOfPositiveVotes(key));\n        return numberOfVotes;\n      }), this.sumAllNumbers(numberOfVotes))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, data.steps.length > 1 ? React.createElement(\"button\", {\n        onClick: this.toggleStep,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, viewSteps ? 'Close steps' : 'View steps') : null)), React.createElement(\"ol\", {\n        className: \"container-post-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, viewSteps ? data.steps.map(function (step, key) {\n        return React.createElement(\"li\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"container-post-votes\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, step.positiveVotes), React.createElement(\"img\", {\n          src: \"\".concat(process.env.PUBLIC_URL, \"/img/arrow_up.png\"),\n          alt: \"arrow-img\",\n          width: \"40px\",\n          onClick: _this2.handleIncreaseVote(key),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, step.negativeVotes), React.createElement(\"img\", {\n          src: \"\".concat(process.env.PUBLIC_URL, \"/img/arrow_down.png\"),\n          alt: \"arrow-img\",\n          width: \"40px\",\n          onClick: _this2.handleDecreaseVote(key),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"container-post-step\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, step.step));\n      }) : null)));\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nexport default Container;","map":{"version":3,"sources":["/home/oem/ironhack/final-project/epi-frontend/src/components/Container.js"],"names":["React","Component","vote","Link","moment","Container","state","data","props","viewSteps","postives","handleIncreaseVote","index","steps","positiveVotes","setState","createPositiveVote","_id","then","catch","error","console","log","handleDecreaseVote","negativeVotes","createNegativeVote","toggleStep","key","arrayOfNums","reduce","previusValue","curentVlue","numberOfVotes","positive","acum","item","negative","title","author","username","date","fromNow","text","map","step","push","handleRatioOfPositiveVotes","sumAllNumbers","length","process","env","PUBLIC_URL"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport vote from '../lib/votes-service';\nimport { Link } from 'react-router-dom'\nimport '../stylesheets/container-component.css'\nimport moment from 'moment'\n\nclass Container extends Component {\n\n  state = {\n    data: this.props.data,\n    viewSteps: false,\n    postives: [],\n  }\n  \n  //INCREASE THE POSITIVE VOTES\n  handleIncreaseVote = (index) => () => {\n    const data = {...this.state.data}\n    data.steps[index].positiveVotes++;\n    // console.log(data)\n    \n    this.setState({\n      data: data\n    })\n    \n    //CALLING POSITIVE VOTES SERVICE\n    vote.createPositiveVote( data._id, data.steps[index]._id )\n    .then(() => {\n      // console.log(data)\n    })\n    .catch( error => {console.log(error) })\n  }\n\n  //INCREASE THE NEGATIVE VOTES\n  handleDecreaseVote = (index) => () => {\n    // Esto crea una shalow copy\n    const data = {...this.state.data}\n    data.steps[index].negativeVotes++;\n    // console.log(data)\n    \n    this.setState({\n      data: data\n    })\n    \n    //CALLING NEGATIVE VOTES SERVICE\n    vote.createNegativeVote( data._id, data.steps[index]._id )\n    .then(() => {\n      // console.log(data)\n    })\n    .catch( error => {console.log(error) })\n  }\n\n  toggleStep = () => {\n    const { viewSteps } = this.state\n    this.setState({\n      viewSteps: !viewSteps\n    })\n  }\n\n  handleRatioOfPositiveVotes(key){\n    const {data, postives} = this.state;\n    return data.steps[key].positiveVotes;\n  }\n\n  sumAllNumbers(arrayOfNums){\n    arrayOfNums.reduce(function(previusValue, curentVlue){\n      // console.log(previusValue, curentVlue)\n      return previusValue + curentVlue;\n    }, 0);\n\n  }\n\n\n  //\n  /*{data.steps.map( (step, key) =>{\n    numberOfVotes.push(this.handleRatioOfPositiveVotes(key))\n    return numberOfVotes.reduce(function(previusValue, curentVlue){\n      console.log(previusValue, curentVlue)\n      return previusValue + curentVlue;\n    }, 0);\n  })}\n  */\n\n  /*\n  (numerosPositivos / (numerosPositivos + numerosNegativos) * 100\n  */\n\n  render() {\n    const { data, viewSteps } = this.state\n    const numberOfVotes = [];\n    const positive = data.steps.reduce((acum, item) => {\n      console.log('E', item.positiveVotes)\n      return acum + item.positiveVotes\n    }, 0)\n    const negative = data.steps.reduce((acum, item) => {\n      return acum + item.negativeVotes\n    }, 0)\n    // console.log((positive / (positive + negative)) * 100);\n    return (\n      <div>\n        <div className=\"container-post-post\">\n          <h1>{data.title}</h1>\n          <div className=\"container-post-author\">\n          <p><Link to={`/profile/${data.author._id}`}>{data.author.username}</Link></p>\n          <p>{moment(data.date).fromNow()}</p>\n          </div>\n          <p className=\"container-post-description\">{data.text}</p>\n          <div>\n            <div>\n              <p>Positive votes: \n              {data.steps.map( (step, key) =>{\n                numberOfVotes.push(this.handleRatioOfPositiveVotes(key))\n                return numberOfVotes\n              })}\n              {this.sumAllNumbers(numberOfVotes)}\n\n\n              </p> \n            </div>\n            <div>\n              {data.steps.length > 1 ? \n              <button onClick={this.toggleStep}>{viewSteps ? 'Close steps' : 'View steps'}</button> : null}\n            </div>\n          </div>\n          <ol className=\"container-post-list\">\n          {viewSteps ? data.steps.map((step, key) => {\n            return <li key={key}>\n              <div className=\"container-post-votes\">\n                <p>{step.positiveVotes}</p>\n                <img src={`${process.env.PUBLIC_URL}/img/arrow_up.png`} alt=\"arrow-img\" width=\"40px\" onClick={this.handleIncreaseVote(key)}></img>\n                <p>{step.negativeVotes}</p>\n                <img src={`${process.env.PUBLIC_URL}/img/arrow_down.png`} alt=\"arrow-img\" width=\"40px\" onClick={this.handleDecreaseVote(key)}></img>\n              </div>\n              <div className=\"container-post-step\">{step.step}</div>         \n            </li>\n          }) : null}\n          </ol>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Container"]},"metadata":{},"sourceType":"module"}