{"ast":null,"code":"import _classCallCheck from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/oem/ironhack/final-project/epi-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/oem/ironhack/final-project/epi-frontend/src/pages/profile/Profile.js\";\nimport React, { Component } from 'react';\nimport { withAuth } from '../../lib/authContext';\nimport profileAjax from '../../lib/profile-service';\nimport { Route, Link } from 'react-router-dom';\nimport Mypost from './Mypost';\nimport Following from './Following';\nimport '../../stylesheets/profile-page.css';\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Profile)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: '',\n      isLoading: true,\n      isSameUser: false\n    };\n\n    _this.update = function () {\n      _this.setState({\n        isLoading: true\n      });\n\n      var id = _this.props.match.params.id;\n      profileAjax.getProfile(id).then(function (data) {\n        var loggedUser = _this.props.user._id;\n\n        if (loggedUser === id) {\n          _this.setState({\n            user: data,\n            isLoading: false,\n            isSameUser: true\n          });\n        } else {\n          _this.setState({\n            user: data,\n            isLoading: false,\n            isSameUser: false\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.addFollower = function (e) {\n      var id = _this.props.match.params.id;\n      profileAjax.follow(id).then(function (data) {\n        _this.setState({\n          user: data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.update();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var id = this.props.match.params.id;\n      var _this$state$user = this.state.user,\n          _id = _this$state$user._id,\n          username = _this$state$user.username,\n          avatar = _this$state$user.avatar,\n          description = _this$state$user.description;\n      return React.createElement(\"div\", {\n        className: \"profile-main-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: avatar,\n        alt: username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/profile/\".concat(_id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, username), this.state.isSameUser ? null : React.createElement(\"button\", {\n        onClick: this.addFollower.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Follow me\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, description)), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/profile/\".concat(id, \"/mypost\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"link1\"), React.createElement(Link, {\n        to: \"/profile/\".concat(id, \"/following\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"link2\")), React.createElement(Route, {\n        path: \"/profile/\".concat(id, \"/mypost\"),\n        render: function render(props) {\n          return React.createElement(Mypost, Object.assign({}, props, {\n            id: id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/profile/\".concat(id, \"/following\"),\n        render: function render(props) {\n          return React.createElement(Following, Object.assign({}, props, {\n            user: _this2.state.user,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nexport default withAuth(Profile);","map":{"version":3,"sources":["/home/oem/ironhack/final-project/epi-frontend/src/pages/profile/Profile.js"],"names":["React","Component","withAuth","profileAjax","Route","Link","Mypost","Following","Profile","state","user","isLoading","isSameUser","update","setState","id","props","match","params","getProfile","then","data","loggedUser","_id","catch","error","console","log","addFollower","e","follow","username","avatar","description","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { withAuth } from '../../lib/authContext';\nimport profileAjax from '../../lib/profile-service';\nimport { Route, Link } from 'react-router-dom';\nimport Mypost from './Mypost';\nimport Following from './Following';\nimport '../../stylesheets/profile-page.css'\n\nclass Profile extends Component {\n\n  state = {\n    user: '',\n    isLoading: true,\n    isSameUser: false,\n  }\n\n  componentDidMount() {\n    this.update()\n  }\n\n  update = () => {\n    this.setState({\n      isLoading: true,\n    })\n    const id = this.props.match.params.id;\n    profileAjax.getProfile(id)\n      .then(data => {\n        const loggedUser = this.props.user._id\n        if (loggedUser === id) {\n          this.setState({\n            user: data,\n            isLoading: false,\n            isSameUser: true,\n          })\n        } else {\n          this.setState({\n            user: data,\n            isLoading: false,\n            isSameUser: false,\n          })\n        }\n      })\n      .catch(error=> {\n        console.log(error)\n      });\n  }\n\n  addFollower = (e) => {\n    const id = this.props.match.params.id;\n    profileAjax.follow(id)\n    .then(data => {\n      this.setState({\n        user: data,\n      })\n    })\n    .catch(error=> {\n      console.log(error)\n    });\n  }\n    \n    \n  render() {\n    const id = this.props.match.params.id;\n    const {_id, username, avatar, description} = this.state.user\n    return (\n      <div className='profile-main-page'>\n        <div>\n          <div>\n            <img src={avatar} alt={username} />\n          </div>\n          <div>\n            <Link to={`/profile/${_id}`}>{username}</Link> \n            { this.state.isSameUser ? null : <button onClick={this.addFollower.bind(this)}>Follow me</button>} \n          </div>\n          <div>\n            {description}\n          </div>\n        </div>\n        <div>\n          <nav>\n            <Link to={`/profile/${id}/mypost`}>link1</Link>\n            <Link to={`/profile/${id}/following`}>link2</Link>\n          </nav>\n          <Route path={`/profile/${id}/mypost`} render={props => {return <Mypost {...props} id={id} />}}/>\n          <Route path={`/profile/${id}/following`} render={props => {return <Following {...props} user={this.state.user} />}}/>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withAuth(Profile);\n"]},"metadata":{},"sourceType":"module"}